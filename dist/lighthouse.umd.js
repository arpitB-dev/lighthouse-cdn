!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).lighthouse=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t,n={};return{encrypt:e(function(){if(t)return n;t=1,Object.defineProperty(n,"__esModule",{value:!0}),n.decryptFile=n.encryptFile=void 0;const e=async e=>window.crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey"]),r=async(e,t,n)=>window.crypto.subtle.deriveKey(n,e,{name:"AES-GCM",length:256},!1,t);return n.encryptFile=async(t,n)=>{try{const o=new Uint8Array(t),i=(new TextEncoder).encode(n),a=window.crypto.getRandomValues(new Uint8Array(16)),c=window.crypto.getRandomValues(new Uint8Array(12)),y=await e(i),s=await r(y,["encrypt"],{name:"PBKDF2",salt:a,iterations:25e4,hash:"SHA-256"}),l=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:c},s,o),d=new Uint8Array(l),u=new Uint8Array(d.byteLength+a.byteLength+c.byteLength);return u.set(a,0),u.set(c,a.byteLength),u.set(d,a.byteLength+c.byteLength),u}catch(e){throw console.error("Error encrypting file"),console.error(e),e}},n.decryptFile=async(t,n)=>{try{const o=new Uint8Array(t),i=(new TextEncoder).encode(n),a=o.slice(0,16),c=o.slice(16,28),y=o.slice(28),s=await e(i),l=await r(s,["decrypt"],{name:"PBKDF2",salt:a,iterations:25e4,hash:"SHA-256"});return await window.crypto.subtle.decrypt({name:"AES-GCM",iv:c},l,y)}catch(e){return console.error("Error decrypting file"),void console.error(e)}},n}())}});
